<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TaCarla: Autonomous Driving Benchmark</title>

  <!-- Theme CSS -->
  <link rel="stylesheet" href="style.css">

  <style>
    /* Small inline adjustments (most styles in style.css) */
    .content { white-space: pre-wrap; }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
    .hero { background: #0b1220; color: #fff; padding: 40px 0; }
    .hero-title { font-size: 2.4rem; margin: 0 0 8px; }
    .hero-subtitle { margin: 0 0 16px; opacity: 0.9; }
    .authors, .affiliations { display:flex; gap:12px; flex-wrap:wrap; margin-bottom:12px; }
    .btn { display:inline-block; padding:8px 14px; border-radius:8px; text-decoration:none; }
    .btn-primary { background:#2563eb; color:#fff; }
    .btn-secondary { background:#e6edf8; color:#0b1220; }
    .section { padding: 28px 0; border-bottom: 1px solid #eee; }
    .figure { margin: 18px 0; text-align:center; }
    .table-responsive { overflow-x:auto; }
    .results-table { border-collapse: collapse; width: 100%; min-width: 640px; }
    .results-table th, .results-table td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    .results-table thead th { background: #f6f8fb; }
    .citation-box { background:#f9fbff; border:1px solid #e6eefc; padding:12px; border-radius:8px; }
    .image-modal { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.75); align-items:center; justify-content:center; z-index:9999; }
    .image-modal.active { display:flex; }
    .image-modal img { max-width:96%; max-height:92%; border-radius:6px; box-shadow: 0 8px 30px rgba(0,0,0,0.6); }
    .close-modal { position:absolute; top:20px; right:26px; font-size:34px; color:#fff; cursor:pointer; }
    .small-muted { color:#666; font-size:0.9rem; }
    .content-card { background:#fff; border:1px solid #eee; padding:14px; border-radius:8px; }
    .card-title { font-weight:600; margin-bottom:8px; }

    /* Traffic-light samples: larger, responsive */
    .tl-samples {
      display:flex;
      gap:16px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }
    .tl-samples img {
      width:48%;
      max-width:520px;
      border-radius:6px;
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
      cursor:zoom-in;
    }
    @media (max-width:920px){
      .tl-samples img { width:60%; max-width:420px; }
    }
    @media (max-width:480px){
      .tl-samples img { width:100%; max-width:420px; }
    }

    /* Data visualization gallery */
    .viz-gallery {
      display:flex;
      gap:16px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:flex-start;
    }
    .viz-gallery .viz-item {
      flex: 1 1 300px;
      max-width: 360px;
      text-align:center;
    }
    .viz-gallery img {
      width:100%;
      height:auto;
      border-radius:8px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06);
      cursor:zoom-in;
    }
    .viz-caption { margin-top:8px; font-size:0.95rem; color:#444; }

    /* Responsive tweaks */
    @media (max-width:720px){
      .hero-title { font-size:1.6rem; }
      .container { padding:16px; }
      .viz-gallery { gap:12px; }
      .viz-gallery .viz-item { max-width:100%; flex: 1 1 100%; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="hero" role="banner">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">TaCarla</h1>
        <p class="hero-subtitle">A comprehensive benchmarking dataset for end-to-end autonomous driving</p>

        <div class="authors" aria-hidden="false">
          <span class="author">TaCarla Research Team</span>
          <span class="author">CARLA Leaderboard 2.0</span>
        </div>

        <div class="affiliations">
          <span class="affiliation">CARLA Simulation â€” Leaderboard 2.0 Scenarios</span>
        </div>

        <div class="action-buttons" style="margin-top:12px;">
          <a class="btn btn-primary" href="#download">ðŸ“¥ Download</a>
          <a class="btn btn-secondary" href="#citation">ðŸ“‹ Cite</a>
          <a class="btn btn-secondary" href="https://github.com/atg93/TaCarla-Visualization" target="_blank" rel="noopener">ðŸ“Š Data Visualization</a>
        </div>
      </div>
    </div>
  </header>

  <!-- ABSTRACT -->
  <section class="section" id="abstract">
    <div class="container">
      <h2>Abstract</h2>

      <div class="content-card" aria-live="polite">
        <div class="card-title"><span>Abstract</span></div>

        <div id="abstract-content" class="content">
Collecting a high-quality dataset is a critical task that demands meticulous attention to detail, as overlooking certain aspects can render the entire dataset unusable. Autonomous driving challenges remain a prominent area of research, requiring further exploration to enhance the perception and planning performance of vehicles. However, existing datasets are often incomplete. For instance, datasets that include perception information generally lack planning data, while planning datasets typically consist of extensive driving sequences where the ego vehicle predominantly drives forward, offering limited behavioral diversity.

The CARLA Leaderboard 2.0 challenge, providing a diverse set of scenarios to address the long-tail problem in autonomous driving, has emerged as a valuable alternative platform for developing perception and planning models. Nevertheless, existing datasets collected on this platform present certain limitations. Some datasets appear to be tailored primarily for limited sensor configuration, with particular sensor configurations. Additionally, in some datasets, the expert policies used for data collection exhibit suboptimal driving behaviors, such as oscillations.

To support end-to-end autonomous driving research, we have collected a new dataset comprising over 2.85 million frames using the CARLA simulation environment for the diverse Leaderboard 2.0 challenge scenarios, making it the largest dataset in the literature to the best of our knowledge. Our dataset is designed not only for planning tasks but also supports dynamic object detection, lane divider detection, centerline detection, traffic light recognition, and prediction tasks. Furthermore, we demonstrate its versatility by training various models using our dataset.
        </div>
      </div>

      <p class="small-muted" style="margin-top:10px">
        Note: Any math expressions will appear as plain text unless you add a math renderer.
      </p>
    </div>
  </section>

  <!-- EXPERIMENTS -->
  <section class="section" id="experiments">
    <div class="container">
      <h2 id="sec:experiments">Experiments</h2>

      <!-- 3D Object Detection -->
      <article class="experiment-block" id="3d-object-detection">
        <h3>3D Object Detection</h3>

        <p>
          We employed a non-transformer-based architecture for multi-view birdâ€™s eye view (BEV)-based 3D object detection.
          In this architecture, the multi-view camera images are initially processed by a convolutional image encoder,
          specifically <em>RegNetY-800MF</em>, with a feature pyramid network based on <em>BiFPN</em>. We project the
          feature levels at /8, /16, and /32 resolutions into the BEV representation using Lift-Splat projection.
          Features from the previous two frames are warped to the current frame using egomotion and then concatenated
          along the channel dimension, similar to BevDet4D. Gradients produced by the previous frames are not used to
          update the image encoder. The resulting spatio-temporal BEV features are processed by a ResNet-based BEV backbone.
          These features are then shared among task-specific heads.
        </p>

        <p>
          We utilize <em>RQR3D</em> for BEV-based 3D object detection. RQR3D reparametrizes the regression targets for the 3D
          bounding boxes and implements this reparameterized regression task on an anchor-free single-stage object detector,
          introducing an objectness head to address class imbalance problems of single-stage detectors. RQR3D outperforms
          widely-adopted CenterPoint-based approaches, yielding lower translation and orientation errors, which are crucial
          for safe autonomous driving. When using LiDAR, we simply map the point cloud onto the BEV grid and concatenate it
          with the projected image feature before temporal processing.
        </p>

        <!-- Table: class counts -->
        <figure class="table-figure" aria-labelledby="tab-3d-class-counts-caption">
          <figcaption id="tab-3d-class-counts-caption"><strong>Table:</strong> The number of objects for 3D object detection</figcaption>
          <div class="table-responsive">
            <table class="results-table" id="tab:3d_class_counts">
              <thead>
                <tr>
                  <th></th>
                  <th>Ambulance</th>
                  <th>Construction</th>
                  <th>Crossbike</th>
                  <th>Walker</th>
                  <th>Car</th>
                  <th>Firetruck</th>
                  <th>Police</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>train</th>
                  <td>2,306</td>
                  <td>50,486</td>
                  <td>28,980</td>
                  <td>17,247</td>
                  <td>683,332</td>
                  <td>1,070</td>
                  <td>21,181</td>
                </tr>
                <tr>
                  <th>val</th>
                  <td>2,060</td>
                  <td>2,248</td>
                  <td>32,177</td>
                  <td>9,703</td>
                  <td>419,697</td>
                  <td>1,495</td>
                  <td>9,803</td>
                </tr>
              </tbody>
            </table>
          </div>
        </figure>

        <p>
          To align our dataset with the <em>nuScenes</em> benchmark, which provides annotated keyframes at 2 Hz, we downsampled
          our original 10 Hz data to 2 Hz. This conversion ensures consistency in temporal resolution, facilitating fair
          comparisons and compatibility with existing evaluation protocols.
        </p>

        <p>
          Additionally, we selected scenarios whose names contain keywords such as <em>accident, construction, dynamic,
          pedestrian, hazard, emergency,</em> and <em>opposite</em> to achieve a more balanced class distribution. The resulting
          number of objects per category is summarized above.
        </p>

        <p>
          We utilize two different sensor configurations: <strong>camera-only</strong> and <strong>cameraâ€“LiDAR</strong>. Evaluation
          metrics are adopted from nuScenes, including mean Average Precision (mAP), Average Translation Error (ATE), Average
          Scale Error (ASE), Average Orientation Error (AOE) and Average Velocity Error (AVE). (Average Attribute Error (AAE)
          is excluded as it is not applicable for TaCarla.) The inclusion of LiDAR enhances depth estimation accuracy, leading to
          improved localization and orientation predictions (lower ATE and AOE). The camera-only configuration exhibits higher errors
          due to the inherent challenges in depth estimation. The detailed class-wise performance metrics are presented below,
          illustrating the comparative effectiveness of both approaches.
        </p>

        <!-- Camera-only and Camera-LiDAR tables (full content retained) -->
        <figure class="table-figure" aria-labelledby="tab-3d-results-lss-caption">
          <figcaption id="tab-3d-results-lss-caption"><strong>Table:</strong> Camera-only 3D object detection performance</figcaption>
          <div class="table-responsive">
            <table class="results-table" id="tab:3d_results_lss">
              <thead>
                <tr>
                  <th>Class</th>
                  <th>AP</th>
                  <th>ATE</th>
                  <th>ASE</th>
                  <th>AOE</th>
                  <th>AVE</th>
                </tr>
              </thead>
              <tbody>
                <tr><th>Car</th>        <td>0.459</td> <td>0.444</td> <td>0.147</td> <td>0.012</td> <td>0.559</td></tr>
                <tr><th>Crossbike</th>  <td>0.324</td> <td>0.242</td> <td>0.094</td> <td>0.057</td> <td>0.165</td></tr>
                <tr><th>Walker</th>     <td>0.426</td> <td>0.456</td> <td>0.885</td> <td>1.333</td> <td>0.292</td></tr>
                <tr><th>Police</th>     <td>0.381</td> <td>0.249</td> <td>0.056</td> <td>0.011</td> <td>0.048</td></tr>
                <tr><th>Construction</th><td>0.419</td> <td>0.665</td> <td>0.812</td> <td>1.125</td> <td>0.065</td></tr>
                <tr><th>Ambulance</th>  <td>0.098</td> <td>0.440</td> <td>0.132</td> <td>0.065</td> <td>0.525</td></tr>
                <tr><th>Firetruck</th>  <td>0.140</td> <td>0.487</td> <td>0.155</td> <td>0.004</td> <td>0.618</td></tr>
              </tbody>
              <tfoot>
                <tr>
                  <td><strong>Overall</strong></td>
                  <td><strong>mAP: 0.32</strong></td>
                  <td><strong>mATE: 0.43</strong></td>
                  <td><strong>mASE: 0.33</strong></td>
                  <td><strong>mAOE: 0.37</strong></td>
                  <td><strong>mAVE: 0.32</strong></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </figure>

        <figure class="table-figure" aria-labelledby="tab-3d-results-lss-lidar-caption">
          <figcaption id="tab-3d-results-lss-lidar-caption"><strong>Table:</strong> Cameraâ€“LiDAR 3D object detection performance</figcaption>
          <div class="table-responsive">
            <table class="results-table" id="tab:3d_results_lss_lidar">
              <thead>
                <tr>
                  <th>Class</th>
                  <th>AP</th>
                  <th>ATE</th>
                  <th>ASE</th>
                  <th>AOE</th>
                  <th>AVE</th>
                </tr>
              </thead>
              <tbody>
                <tr><th>Car</th>        <td>0.716</td> <td>0.173</td> <td>0.125</td> <td>0.022</td> <td>0.399</td></tr>
                <tr><th>Crossbike</th>  <td>0.556</td> <td>0.113</td> <td>0.086</td> <td>0.076</td> <td>0.119</td></tr>
                <tr><th>Walker</th>     <td>0.527</td> <td>0.152</td> <td>0.885</td> <td>1.304</td> <td>0.277</td></tr>
                <tr><th>Police</th>     <td>0.486</td> <td>0.082</td> <td>0.052</td> <td>0.018</td> <td>0.038</td></tr>
                <tr><th>Construction</th><td>0.657</td> <td>0.253</td> <td>0.821</td> <td>1.125</td> <td>0.098</td></tr>
                <tr><th>Ambulance</th>  <td>0.428</td> <td>0.254</td> <td>0.100</td> <td>0.074</td> <td>0.283</td></tr>
                <tr><th>Firetruck</th>  <td>0.452</td> <td>0.270</td> <td>0.108</td> <td>0.002</td> <td>0.344</td></tr>
              </tbody>
              <tfoot>
                <tr>
                  <td><strong>Overall</strong></td>
                  <td><strong>mAP: 0.55</strong></td>
                  <td><strong>mATE: 0.19</strong></td>
                  <td><strong>mASE: 0.31</strong></td>
                  <td><strong>mAOE: 0.37</strong></td>
                  <td><strong>mAVE: 0.22</strong></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </figure>

      </article>

      <!-- Lane Detection -->
      <article class="experiment-block" id="lane-detection">
        <h3>Lane Detection</h3>

        <figure class="table-figure" aria-labelledby="tab-topobda-caption">
          <figcaption id="tab-topobda-caption"><strong>Table:</strong> Centerline and Lane Divider Detection Results of TopoBDA architecture for TaCarla Dataset</figcaption>
          <div class="table-responsive">
            <table class="results-table" id="tab:topobda_tacarla">
              <thead>
                <tr>
                  <th>Detection Task</th>
                  <th>AP<sub>f</sub></th>
                  <th>AP<sub>c</sub></th>
                  <th>F1<sub>1.5</sub></th>
                </tr>
              </thead>
              <tbody>
                <tr><td>Centerline Detection</td> <td>58.2</td> <td>60.9</td> <td>73.8</td></tr>
                <tr><td>Lane Divider Detection</td> <td>N/A</td> <td>60.2</td> <td>75.6</td></tr>
              </tbody>
            </table>
          </div>
        </figure>

        <p>
          Lane detection consists of two sub-tasks: lane divider detection and centerline detection. For the lane divider and centerline
          detection tasks, Chamfer Distance-based Average Precision (<code>AP<sub>c</sub></code>) and FrÃ©chet Distance-based Average Precision
          (<code>AP<sub>f</sub></code>) metrics were utilized. These metrics evaluate geometric similarity between predicted and ground-truth polylines.
          For <code>AP<sub>f</sub></code>, thresholds are 1, 2, and 3 meters; for <code>AP<sub>c</sub></code>, thresholds are 0.5, 1, and 1.5 meters.
          The F1 metric is included (threshold set to 1.5 meters in our study); 11 ground-truth points are used for all metrics.
        </p>

        <p>
          For training both centerlines and lane dividers we used the TopoBDA architecture, which incorporates specialized attention structures and
          polyline training practices derived from TopoMaskV2. The Bezier Deformable Attention mechanism focuses attention around Bezier keypoints,
          improving detection and representation of elongated and thin polyline structures.
        </p>

        <!-- BEV as PNG image (if present) -->
        <figure class="figure" id="fig:bev_samples">
          <img src="figures/bev_tacarla.png" alt="BEV results showing GT, Pred and overlay GT+Pred" data-full="figures/bev_tacarla.png" style="width:100%;max-width:900px;cursor:zoom-in;">
          <figcaption>
            Bird's Eye View (BEV) results demonstrating the performance of TopoBDA on the TaCarla dataset. <em>GT</em> denotes the ground truth,
            and <em>Pred</em> denotes the predictions. <em>GT + Pred</em> shows the overlaid results of both.
          </figcaption>
        </figure>

        <!-- Traffic light samples -->
        <figure class="figure tl-samples" role="group" aria-label="Traffic light model outputs">
          <img src="figures/tl_red.jpg" alt="Traffic light red example" data-full="figures/tl_red.jpg">
          <img src="figures/tl_green.jpg" alt="Traffic light green example" data-full="figures/tl_green.jpg">
          <figcaption style="width:100%;margin-top:10px;text-align:center;">
            Outputs of the FCOS traffic light model (red and green examples).
          </figcaption>
        </figure>

      </article>

      <!-- Traffic Light Detection -->
      <article class="experiment-block" id="traffic-light-detection">
        <h3>Traffic Light Detection</h3>

        <p>
          The dataset contains <strong>238,780</strong> training and <strong>187,987</strong> validation images with traffic light instances.
          Each image contains a single traffic light instance with three classes: <em>red</em>, <em>yellow</em>, and <em>green</em>.
          Every instance is labeled with a 2D bounding box and class. We used an off-the-shelf single-stage object detector, <em>FCOS</em> with
          ResNet-50 backbone, as a baseline. We trained with a 1Ã— schedule (12 epochs) and learning rate <code>1e-3</code>, decayed by 0.1 at
          epochs 8 and 11. COCO-style <code>AP</code> and <code>AP<sub>50</sub></code> are reported below.
        </p>

        <figure class="table-figure" aria-labelledby="tab-tlr-caption">
          <figcaption id="tab-tlr-caption"><strong>Table:</strong> Traffic Light Detection task results in TaCarla.</figcaption>
          <div class="table-responsive">
            <table class="results-table" id="tab:TLR">
              <thead>
                <tr>
                  <th>Model</th>
                  <th>AP</th>
                  <th>AP<sub>50</sub></th>
                </tr>
              </thead>
              <tbody>
                <tr><td>FCOS</td><td>59.5</td><td>88.2</td></tr>
              </tbody>
            </table>
          </div>
        </figure>
      </article>

      <!-- Planning -->
      <article class="experiment-block" id="planning">
        <h3>Planning</h3>

        <figure class="figure">
          <img src="figures/planning.png" alt="Waypoints comparison for Ground Truth, PlanT, Transfuser, and DiffusionDrive" style="width:100%;max-width:900px;">
          <figcaption>
            Waypoints from ground truth (Top Left), PlanT (Top Right), Transfuser (Bottom Left), and DiffusionDrive (Bottom Right) models.
          </figcaption>
        </figure>

        <p>
          For the planning task, we trained three baseline agents: <em>Transfuser</em>, <em>DiffusionDrive</em>, and <em>PlanT</em>.
          Transfuser and DiffusionDrive were chosen due to their success on Navsim. Both agents use a ResNet-34 backbone with 3 forward-facing cameras
          and LiDAR. Cameras are cropped and concatenated into a single image of size <code>256Ã—1024</code> and LiDAR point clouds rasterized
          into a BEV of size <code>256Ã—256</code>. Ego status input contains velocity, acceleration and driving command. Driving commands are computed
          as in Navsim. Annotated lane-guidance waypoints are classified by checking the lateral distance of the point 15 m ahead of ego; threshold is 2 m.
        </p>

        <p>
          DiffusionDrive was trained for 6 epochs and Transfuser for 3 epochs with learning rate <code>7.5Ã—10<sup>-5</sup></code> on 8 NVIDIA A100 GPUs
          with total batch size 64. Training set scenarios were filtered with driving score &gt; 70. During training we sampled ground-truth trajectories
          at 2 Hz (8 waypoints for a 4 s horizon). Implementation follows DiffusionDrive where we used 20 anchors clustered from our dataset.
          During evaluation we used 2 denoising steps as in the Navsim challenge.
        </p>

        <p>
          PlanT was trained for 50 epochs, batch size 16, learning rate <code>1e-4</code>. PlanT uses ground-truth informationâ€”training it verifies
          dataset labels.
        </p>

        <p>
          For evaluation we provide open-loop and closed-loop results. Open-loop metrics are ADE (average displacement error), FDE (final displacement error),
          AHE (average heading error) and FHE (final heading error) between predicted and ground-truth trajectories as in NuPlan. Metrics are provided for
          prediction horizons of 1 s, 2 s and 4 s at 2 Hz sampling. We used the Town13 validation set limited to 400-frame episodes. Closed-loop evaluation
          was run on 36 simplified scenarios within the CARLA Leaderboard V2 framework. Scenario-specific results are in the Appendix.
        </p>

        <!-- Open-loop results table -->
        <figure class="table-figure" aria-labelledby="tab-openloop-caption">
          <figcaption id="tab-openloop-caption"><strong>Table:</strong> Open-loop results on validation set with 1s, 2s and 4s planning horizons (H)</figcaption>
          <div class="table-responsive">
            <table class="results-table" id="tab:openloop-results">
              <thead>
                <tr>
                  <th rowspan="2">Model</th>
                  <th colspan="5">Input</th>
                  <th rowspan="2">H (s)</th>
                  <th colspan="4">Results</th>
                </tr>
                <tr>
                  <th>Camera</th>
                  <th>LiDAR</th>
                  <th>GT Box</th>
                  <th>Ego Status</th>
                  <th></th>
                  <th>ADE</th>
                  <th>FDE</th>
                  <th>AHE</th>
                  <th>FHE</th>
                </tr>
              </thead>
              <tbody>
                <!-- DiffusionDrive -->
                <tr>
                  <td rowspan="3">DiffusionDrive</td>
                  <td></td><td></td><td></td><td></td><td></td>
                  <td>4</td>
                  <td>2.69</td><td>5.58</td><td>0.27</td><td>0.21</td>
                </tr>
                <tr>
                  <td>âœ“</td><td>âœ“</td><td></td><td>âœ“</td><td></td>
                  <td>2</td>
                  <td>1.14</td><td>2.14</td><td>0.21</td><td>0.21</td>
                </tr>
                <tr>
                  <td></td><td></td><td></td><td></td><td></td>
                  <td>1</td>
                  <td>0.51</td><td>0.78</td><td>0.12</td><td>0.12</td>
                </tr>

                <!-- PlanT -->
                <tr>
                  <td rowspan="3">PlanT</td>
                  <td></td><td></td><td></td><td></td><td></td>
                  <td>4</td>
                  <td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td>
                </tr>
                <tr>
                  <td></td><td></td><td>âœ“</td><td></td><td></td>
                  <td>2</td>
                  <td>1.03</td><td>1.71</td><td>0.36</td><td>0.34</td>
                </tr>
                <tr>
                  <td></td><td></td><td></td><td></td><td></td>
                  <td>1</td>
                  <td>â€”</td><td>â€”</td><td>â€”</td><td>â€”</td>
                </tr>

                <!-- Transfuser -->
                <tr>
                  <td rowspan="3">Transfuser</td>
                  <td></td><td></td><td></td><td></td><td></td>
                  <td>4</td>
                  <td>2.29</td><td>4.97</td><td>0.23</td><td>0.27</td>
                </tr>
                <tr>
                  <td>âœ“</td><td>âœ“</td><td></td><td>âœ“</td><td></td>
                  <td>2</td>
                  <td>0.91</td><td>1.74</td><td>0.23</td><td>0.27</td>
                </tr>
                <tr>
                  <td></td><td></td><td></td><td></td><td></td>
                  <td>1</td>
                  <td>0.40</td><td>0.59</td><td>0.22</td><td>0.22</td>
                </tr>
              </tbody>
            </table>
          </div>
        </figure>

      </article>

    </div>
  </section>

  <!-- Visualization: show three images in specified order (images/ folder) -->
  <section class="section" id="visualization">
    <div class="container">
      <h2>Visualization</h2>
      <p class="small-muted">
        Explore interactive visualization tools and sample frames below.
      </p>

      <div class="viz-gallery" role="list">
        <div class="viz-item" role="listitem">
          <img src="images/select_episode.png" alt="Select Episode" data-full="images/select_episode.png" loading="lazy">
          <div class="viz-caption">Select Episode (interface screenshot)</div>
        </div>

        <div class="viz-item" role="listitem">
          <img src="images/bev.png" alt="BEV Visualization" data-full="images/bev.png" loading="lazy">
          <div class="viz-caption">BEV Visualization</div>
        </div>

        <div class="viz-item" role="listitem">
          <img src="images/front.png" alt="Front Camera View" data-full="images/front.png" loading="lazy">
          <div class="viz-caption">Front Camera View</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Citation -->
  <section class="section" id="citation">
    <div class="container">
      <h2>Citation</h2>
      <div class="citation-box">
        <pre id="citation-text">@inproceedings{2025tacarla,
  title   = {TaCarla: A comprehensive benchmarking dataset for end-to-end autonomous driving},
  author  = {TaCarla Research Team},
  year    = {2025}
}</pre>
        <div style="display:flex;flex-direction:column;gap:8px">
          <button class="btn btn-primary" id="copyCitation">ðŸ“‹ Copy Citation</button>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <p>Â© 2025 TaCarla Team</p>
      <p>Contact: <a href="mailto:team@tacarla.example">team@tacarla.example</a></p>
    </div>
  </footer>

  <!-- Image modal -->
  <div id="imageModal" class="image-modal" role="dialog" aria-hidden="true">
    <div class="close-modal" id="closeModal" title="Close">&times;</div>
    <img id="modalImage" src="" alt="Full size" />
  </div>

  <!-- Inline script: image modal + copy citation -->
  <script>
    // image modal
    (function(){
      document.querySelectorAll('img[data-full]').forEach(img=>{
        img.style.cursor = 'zoom-in';
        img.addEventListener('click', ()=>{
          const modal = document.getElementById('imageModal');
          const modalImg = document.getElementById('modalImage');
          modalImg.src = img.dataset.full || img.src;
          modal.classList.add('active');
          modal.setAttribute('aria-hidden','false');
          document.body.style.overflow = 'hidden';
        });
      });
      const closeBtn = document.getElementById('closeModal');
      if (closeBtn) closeBtn.addEventListener('click', ()=>{
        const modal = document.getElementById('imageModal');
        modal.classList.remove('active');
        modal.setAttribute('aria-hidden','true');
        document.getElementById('modalImage').src = '';
        document.body.style.overflow = '';
      });
      document.addEventListener('keydown', (e)=>{ if (e.key==='Escape'){
        const modal=document.getElementById('imageModal'); if(modal && modal.classList.contains('active')){
          modal.classList.remove('active'); modal.setAttribute('aria-hidden','true'); document.getElementById('modalImage').src=''; document.body.style.overflow='';
        }
      }});
      // clicking outside image closes modal
      const imgModal = document.getElementById('imageModal');
      imgModal && imgModal.addEventListener('click', (e)=>{ if (e.target === imgModal){ imgModal.classList.remove('active'); imgModal.setAttribute('aria-hidden','true'); document.getElementById('modalImage').src=''; document.body.style.overflow=''; } });
    })();

    // copy citation
    (function(){
      const btn = document.getElementById('copyCitation');
      if (!btn) return;
      btn.addEventListener('click', async ()=>{
        const text = document.getElementById('citation-text').innerText;
        try {
          await navigator.clipboard.writeText(text);
          btn.textContent = 'âœ… Copied!';
          setTimeout(()=> btn.textContent = 'ðŸ“‹ Copy Citation', 1500);
        } catch (err){
          alert('Could not copy automatically. Here is the citation:\\n\\n' + text);
        }
      });
    })();
  </script>
</body>
</html>
