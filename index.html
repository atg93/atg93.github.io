<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TaCarla ‚Äî Autonomous Driving Study</title>

  <!-- Embedded styles (adapted from the TopoBDA layout you showed) -->
  <style>
    :root{
      --bg: #ffffff;
      --muted: #6b7280;
      --accent: #2563eb;
      --card: #f8fafc;
      --border: #e6eefc;
      --radius: 12px;
      color-scheme: light dark;
    }
    *{box-sizing:border-box}
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin:0;
      background:var(--bg);
      color:#0f172a;
      line-height:1.5;
    }
    .container{max-width:1200px;margin:0 auto;padding:32px;}
    header.hero{
      background:linear-gradient(180deg, rgba(37,99,235,0.06), transparent 60%);
      border-bottom:1px solid var(--border);
      padding:40px 0;
    }
    .hero-content{display:flex;flex-direction:column;gap:18px}
    .hero-title{font-size:32px;margin:0}
    .hero-subtitle{margin:0;color:var(--muted)}
    .authors, .affiliations{display:flex;flex-wrap:wrap;gap:12px;color:var(--muted);font-size:14px}
    .author{background:transparent;padding:2px 6px;border-radius:6px}
    .action-buttons{display:flex;gap:12px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;text-decoration:none;border:1px solid transparent;font-weight:600}
    .btn-primary{background:var(--accent);color:white}
    .btn-secondary{background:transparent;color:var(--accent);border-color:var(--border)}

    section.section{padding:40px 0;border-bottom:1px solid var(--border)}
    h2{margin:0 0 16px 0;font-size:22px}
    p{margin:0 0 12px 0}

    /* grid & cards */
    .grid{display:grid;gap:16px}
    .grid-2{grid-template-columns:repeat(2,1fr)}
    .grid-3{grid-template-columns:repeat(3,1fr)}
    .card{background:var(--card);padding:16px;border-radius:var(--radius);border:1px solid var(--border)}
    .highlight{background:linear-gradient(90deg, rgba(99,102,241,0.06), transparent);border-color: rgba(99,102,241,0.14)}

    /* responsive images & videos */
    img, video{max-width:100%;height:auto;display:block;border-radius:8px}
    .figure-container{display:flex;flex-direction:column;gap:12px;margin-bottom:20px}
    .figure-caption{color:var(--muted);font-size:14px}

    /* tables */
    .table-responsive{overflow:auto}
    table{width:100%;border-collapse:collapse}
    th, td{padding:10px;border-bottom:1px solid #e6eefc;text-align:left;font-size:14px}
    thead th{background:transparent;font-weight:700}
    .performance-table tbody tr.highlight td{font-weight:700}

    /* citation box */
    .citation-box{background:#f8f9ff;padding:12px;border-left:4px solid #667eea;border-radius:8px;display:flex;gap:12px;align-items:flex-start}
    .copy-btn{padding:8px 10px;border-radius:8px;border:0;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}

    /* modal for images */
    .image-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;z-index:60}
    .image-modal img{max-width:95%;max-height:90%;border-radius:8px}
    .image-modal.active{display:flex}
    .close-modal{position:absolute;top:20px;right:24px;color:#fff;font-size:28px;cursor:pointer}

    /* tex/abstract display */
    .tex-card { display:block; padding:16px; border-radius:12px; border:1px solid var(--border); background:var(--card); }
    .tex-title { font-weight:700; margin-bottom:8px; }
    .tex-content { white-space:pre-wrap; color: #0f172a; max-height:420px; overflow:auto; font-size:15px; }

    footer.footer{padding:24px 0;text-align:center;color:var(--muted)}

    /* small screens */
    @media (max-width:900px){
      .grid-2{grid-template-columns:1fr}
      .grid-3{grid-template-columns:1fr}
      .hero-content{padding:0 12px}
      .container{padding:20px}
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="hero">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">TaCarla</h1>
        <p class="hero-subtitle">A comprehensive benchmarking dataset for end-to-end autonomous driving</p>

        <div class="authors">
          <span class="author">TaCarla Research Team</span>
          <span class="author">CARLA Leaderboard 2.0</span>
        </div>
        <div class="affiliations"></div>

        <div class="action-buttons">
          <a href="#download" class="btn btn-primary">üì• Download</a>
          <a href="#citation" class="btn btn-secondary">üìã Cite</a>
          <a href="#visualization" class="btn btn-secondary">üñºÔ∏è Visualization</a>
          <a href="https://github.com/atg93/TaCarla-Visualization" class="btn btn-secondary" target="_blank" rel="noopener">üìä Data Visualization</a>
        </div>
      </div>
    </div>
  </header>

  <!-- OVERVIEW: ABSTRACT LOADED FROM Abstract.tex -->
  <section class="section" id="overview">
    <div class="container">
      <h2>Abstract</h2>

      <div class="grid grid-2" style="align-items:start">
        <div>
          <!-- Abstract will be loaded from Abstract.tex at runtime.
               Make sure Abstract.tex is served in the same directory as this HTML file. -->
          <div id="abstract-from-tex" class="tex-card" aria-live="polite">
            <div class="tex-title">Abstract (loaded from <code>Abstract.tex</code>)</div>
            <div id="abstract-tex-content" class="tex-content">Loading abstract‚Ä¶</div>
          </div>

          <ul style="margin-top:12px;color:var(--muted)">
            <li>Multi-sensor: Camera, BEV, LiDAR-ready design</li>
            <li>Designed for perception + planning tasks</li>
            <li>Large-scale and diverse scenarios to address long-tail behaviors</li>
          </ul>
        </div>

        <div>
          <div class="card">
            <strong>Quick links</strong>
            <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
              <a class="btn btn-secondary" href="#videos">Videos</a>
              <a class="btn btn-secondary" href="#visualization">Visuals</a>
              <a class="btn btn-secondary" href="#download">Download</a>
              <a class="btn btn-secondary" href="https://github.com/atg93/TaCarla-Visualization" target="_blank" rel="noopener">üìä Visualization (GitHub)</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- VIDEOS -->
  <section class="section" id="videos">
    <div class="container">
      <h2>Videos</h2>

      <div class="grid grid-2" style="margin-top:12px">
        <div class="card">
          <video controls preload="metadata" playsinline>
            <source src="videos/Town12_radar_HazardAtSideLaneTwoWays.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
          <div style="margin-top:8px;color:var(--muted)">Hazard at Side Lane (Two Ways)</div>
        </div>

        <div class="card">
          <video controls preload="metadata" playsinline>
            <source src="videos/Town12_radar_StaticCutIn.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
          <div style="margin-top:8px;color:var(--muted)">Static Cut-In</div>
        </div>
      </div>
    </div>
  </section>

  <!-- VISUALIZATION -->
  <section class="section" id="visualization">
    <div class="container">
      <h2>Data Visualization</h2>

      <p style="color:var(--muted);margin-bottom:12px">
        Explore interactive visualization tools and example dashboards for TaCarla on GitHub:
        <a href="https://github.com/atg93/TaCarla-Visualization" target="_blank" rel="noopener">https://github.com/atg93/TaCarla-Visualization</a>
      </p>

      <div class="figure-container">
        <div class="image-container">
          <img src="images/bev.png" alt="BEV Visualization" class="research-figure" loading="lazy" data-full="images/bev.png">
        </div>
        <div class="figure-caption"><strong>BEV Visualization</strong> ‚Äî open full size by clicking the image.</div>
      </div>

      <div class="figure-container">
        <div class="image-container">
          <img src="images/front.png" alt="Front Camera Visualization" class="research-figure" loading="lazy" data-full="images/front.png">
        </div>
        <div class="figure-caption"><strong>Front Camera</strong></div>
      </div>

      <div class="figure-container">
        <div class="image-container">
          <img src="images/select_episode.png" alt="Episode selection UI" class="research-figure" loading="lazy" data-full="images/select_episode.png">
        </div>
        <div class="figure-caption"><strong>Select Episode UI</strong></div>
      </div>
    </div>
  </section>

  <!-- CITATION -->
  <section class="section" id="citation">
    <div class="container">
      <h2>Citation</h2>

      <div class="citation-box">
        <pre id="citation-text" style="margin:0;font-family:ui-monospace,monospace">
@inproceedings{2025tacarla,
  title   = {TaCarla: A comprehensive benchmarking dataset for end-to-end autonomous driving},
  author  = {TaCarla Research Team},
  year    = {2025}
}
        </pre>
        <div style="display:flex;flex-direction:column;gap:8px">
          <button class="copy-btn" id="copyCitation">üìã Copy Citation</button>
          <a href="#download" class="btn btn-secondary" style="text-align:center">üì• Download Bib</a>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <p>¬© 2025 TaCarla Team</p>
      <p>Contact: <a href="mailto:team@tacarla.example">team@tacarla.example</a></p>
    </div>
  </footer>

  <!-- IMAGE MODAL -->
  <div id="imageModal" class="image-modal" role="dialog" aria-hidden="true">
    <div class="close-modal" id="closeModal" title="Close">&times;</div>
    <img id="modalImage" src="" alt="Full size" />
  </div>

  <!-- SCRIPTS -->
  <script>
    /* -----------------------
       Image modal: click image to open full-size in modal
       ----------------------- */
    document.querySelectorAll('img[data-full]').forEach(img => {
      img.style.cursor = 'zoom-in';
      img.addEventListener('click', () => {
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        modalImg.src = img.dataset.full || img.src;
        modal.classList.add('active');
        modal.setAttribute('aria-hidden', 'false');
      });
    });
    document.getElementById('closeModal').addEventListener('click', () => {
      const modal = document.getElementById('imageModal');
      modal.classList.remove('active');
      modal.setAttribute('aria-hidden', 'true');
      document.getElementById('modalImage').src = '';
    });
    document.getElementById('imageModal').addEventListener('click', (e) => {
      if (e.target.id === 'imageModal') {
        e.currentTarget.classList.remove('active');
        e.currentTarget.setAttribute('aria-hidden', 'true');
        document.getElementById('modalImage').src = '';
      }
    });

    /* -----------------------
       Copy citation button
       ----------------------- */
    document.getElementById('copyCitation').addEventListener('click', async () => {
      const text = document.getElementById('citation-text').innerText.trim();
      try {
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById('copyCitation');
        btn.textContent = '‚úÖ Copied!';
        setTimeout(() => btn.textContent = 'üìã Copy Citation', 1500);
      } catch (err) {
        alert('Could not copy to clipboard. Here is the citation:\n\n' + text);
      }
    });

    /* -----------------------
       Load Abstract.tex at runtime
       - Tries to extract \begin{abstract}...\end{abstract}
       - Falls back to full file text
       Notes:
       * Abstract.tex must be in the same public directory as this HTML when served.
       * If you host on GitHub Pages or a static server, upload Abstract.tex alongside index.html.
       ----------------------- */
    (function loadAbstract() {
      const targetEl = document.getElementById('abstract-tex-content');
      if (!targetEl) return;
      fetch('Abstract.tex')
        .then(resp => {
          if (!resp.ok) throw new Error('Could not fetch Abstract.tex: ' + resp.status + ' ' + resp.statusText);
          return resp.text();
        })
        .then(text => {
          // Attempt to extract an abstract environment
          const envMatch = text.match(/\\begin\{abstract\}([\s\S]*?)\\end\{abstract\}/m);
          let display = envMatch ? envMatch[1].trim() : text.trim();

          // Remove common LaTeX commands that are safe to drop for display
          // (simple heuristics ‚Äî not a full LaTeX parser)
          display = display
            .replace(/\\cite\{[^\}]*\}/g, '')         // remove \cite{...}
            .replace(/\\ref\{[^\}]*\}/g, '')          // remove \ref{...}
            .replace(/\\[a-zA-Z]+\*?(?:\[[^\]]*\])?(?:\{[^\}]*\})?/g, '') // drop other commands like \emph{...}
            .replace(/\$\$?([\s\S]*?)\$\$?/g, '')     // drop simple inline/display math
            .replace(/\{\\\}/g, '')                  // cleanup escaped braces
            .trim();

          // If the extracted text is empty, show a helpful note
          if (!display) display = 'Abstract appears to be empty after removing LaTeX commands. Please check Abstract.tex.';

          targetEl.textContent = display;
        })
        .catch(err => {
          targetEl.textContent = 'Error loading Abstract.tex: ' + err.message + '\n\n(Confirm that Abstract.tex is available in the same folder as this HTML on the server.)';
        });
    })();

    // Enable ESC key to close modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        const modal = document.getElementById('imageModal');
        if (modal.classList.contains('active')) {
          modal.classList.remove('active');
          modal.setAttribute('aria-hidden', 'true');
          document.getElementById('modalImage').src = '';
        }
      }
    });
  </script>
</body>
</html>
