<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TaCarla: Autonomous Driving Benchmark</title>

  <!-- Theme CSS -->
  <link rel="stylesheet" href="style.css">

  <style>
    :root { --container-width: 1100px; --accent: #2563eb; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#111; background:#fafafa; margin:0; }
    .container { max-width: var(--container-width); margin: 0 auto; padding: 24px; }
    .hero { background: #0b1220; color: #fff; padding: 40px 0; }
    .hero-title { font-size: 2.2rem; margin: 0 0 8px; }
    .hero-subtitle { margin: 0 0 12px; opacity: 0.95; color:#dbe9ff; }
    .authors, .affiliations { display:flex; gap:12px; flex-wrap:wrap; margin-bottom:12px; font-size:0.95rem; color:#dbe9ff; }
    .btn { display:inline-block; padding:8px 14px; border-radius:8px; text-decoration:none; font-weight:600; }
    .btn-primary { background:var(--accent); color:#fff; }
    .btn-secondary { background:#e6edf8; color:#0b1220; }
    .section { padding: 28px 0; border-bottom: 1px solid #eee; background:transparent; }
    h2 { margin-top:0; }
    .figure { margin: 18px 0; text-align:center; }
    .table-responsive { overflow-x:auto; }
    .results-table { border-collapse: collapse; width: 100%; min-width: 640px; background:#fff; border-radius:6px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.04); }
    .results-table th, .results-table td { border: 1px solid #eee; padding: 8px; text-align: center; font-size:0.95rem; }
    .results-table thead th { background: #fbfdff; font-weight:700; }
    .citation-box { background:#fff; border:1px solid #eef5ff; padding:12px; border-radius:8px; }
    .image-modal { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.75); align-items:center; justify-content:center; z-index:9999; }
    .image-modal.active { display:flex; }
    .image-modal img { max-width:96%; max-height:92%; border-radius:6px; box-shadow: 0 8px 30px rgba(0,0,0,0.6); }
    .close-modal { position:absolute; top:20px; right:26px; font-size:34px; color:#fff; cursor:pointer; }
    .small-muted { color:#666; font-size:0.9rem; }
    .content-card { background:#fff; border:1px solid #eee; padding:14px; border-radius:8px; box-shadow:0 3px 10px rgba(0,0,0,0.03); }
    .card-title { font-weight:600; margin-bottom:8px; }

    /* Study Highlights grid */
    .highlights-grid {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap:18px;
      margin-top:12px;
      align-items:start;
    }
    .highlight-card {
      background:#fff;
      border:1px solid #eef3ff;
      padding:14px;
      border-radius:10px;
      box-shadow:0 6px 18px rgba(0,0,0,0.04);
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .highlight-icon {
      width:44px; height:44px; flex:0 0 44px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:20px;
      background:linear-gradient(180deg, rgba(37,99,235,0.12), rgba(37,99,235,0.06)); color:var(--accent);
    }
    .highlight-body h3 { margin:0 0 6px; font-size:1rem; }
    .highlight-body p { margin:0; font-size:0.95rem; color:#444; line-height:1.4; }

    /* Data visualization gallery */
    .viz-gallery { display:flex; gap:16px; flex-wrap:wrap; justify-content:center; align-items:flex-start; margin-top:12px; }
    .viz-gallery .viz-item { flex: 1 1 300px; max-width: 360px; text-align:center; background:#fff; padding:8px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.04); }
    .viz-gallery img { width:100%; height:auto; border-radius:6px; box-shadow:0 4px 12px rgba(0,0,0,0.04); cursor:zoom-in; display:block; }
    .viz-caption { margin-top:8px; font-size:0.95rem; color:#444; }

    /* Video gallery (new) */
    .video-gallery { display:flex; gap:16px; flex-wrap:wrap; justify-content:center; align-items:flex-start; margin-top:16px; }
    .video-gallery .video-item { flex: 1 1 300px; max-width: 480px; text-align:center; background:#fff; padding:8px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.04); }
    .video-gallery video { width:100%; height:auto; border-radius:6px; box-shadow:0 4px 12px rgba(0,0,0,0.04); display:block; background:#000; }
    .video-caption { margin-top:8px; font-size:0.95rem; color:#444; }

    .video-error { font-size:0.95rem; color:#b91c1c; margin-top:6px; display:none; }

    /* Traffic-light samples */
    .tl-samples { display:flex; gap:16px; flex-wrap:wrap; justify-content:center; align-items:center; margin-top:12px; }
    .tl-samples img { width:48%; max-width:520px; border-radius:6px; box-shadow:0 6px 18px rgba(0,0,0,0.06); cursor:zoom-in; display:block; }

    /* Responsive tweaks */
    @media (max-width:920px){ .tl-samples img { width:60%; max-width:420px; } }
    @media (max-width:720px){ .hero-title { font-size:1.6rem; } .container { padding:16px; } .viz-gallery .viz-item { max-width:100%; flex: 1 1 100%; } .results-table { font-size:0.88rem; } .video-gallery .video-item { max-width:100%; flex:1 1 100%; } }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="hero" role="banner">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">TaCarla</h1>
        <p class="hero-subtitle">A comprehensive benchmarking dataset for end-to-end autonomous driving</p>

        <div class="authors" aria-hidden="false">
          <span class="author">TaCarla Research Team</span>
          <span class="author">CARLA Leaderboard 2.0</span>
        </div>

        <div class="affiliations">
          <span class="affiliation">CARLA Simulation ‚Äî Leaderboard 2.0 Scenarios</span>
        </div>

        <div class="action-buttons" style="margin-top:12px;">
          <a class="btn btn-primary" href="#download">üì• Download</a>
          <a class="btn btn-secondary" href="#citation">üìã Cite</a>
          <a class="btn btn-secondary" href="https://github.com/atg93/TaCarla-Visualization" target="_blank" rel="noopener">üìä Data Visualization</a>
        </div>
      </div>
    </div>
  </header>

  <!-- ABSTRACT -->
  <section class="section" id="abstract">
    <div class="container">
      <h2>Abstract</h2>
      <div class="content-card" aria-live="polite">
        <div class="card-title"><span>Abstract</span></div>
        <div id="abstract-content" class="content">
Collecting a high-quality dataset is a critical task that demands meticulous attention to detail, as overlooking certain aspects can render the entire dataset unusable. Autonomous driving challenges remain a prominent area of research, requiring further exploration to enhance the perception and planning performance of vehicles. However, existing datasets are often incomplete. For instance, datasets that include perception information generally lack planning data, while planning datasets typically consist of extensive driving sequences where the ego vehicle predominantly drives forward, offering limited behavioral diversity.

The CARLA Leaderboard 2.0 challenge, providing a diverse set of scenarios to address the long-tail problem in autonomous driving, has emerged as a valuable alternative platform for developing perception and planning models. Nevertheless, existing datasets collected on this platform present certain limitations. Some datasets appear to be tailored primarily for limited sensor configuration, with particular sensor configurations. Additionally, in some datasets, the expert policies used for data collection exhibit suboptimal driving behaviors, such as oscillations.

To support end-to-end autonomous driving research, we have collected a new dataset comprising over 2.85 million frames using the CARLA simulation environment for the diverse Leaderboard 2.0 challenge scenarios, making it the largest dataset in the literature to the best of our knowledge. Our dataset is designed not only for planning tasks but also supports dynamic object detection, lane divider detection, centerline detection, traffic light recognition, and prediction tasks. Furthermore, we demonstrate its versatility by training various models using our dataset.
        </div>
      </div>
      <p class="small-muted" style="margin-top:10px">Note: Any math expressions will appear as plain text unless you add a math renderer.</p>
    </div>
  </section>

  <!-- Study Highlights -->
  <section class="section" id="study-highlights">
    <div class="container">
      <h2>Study Highlights</h2>
      <div class="highlights-grid" role="list">
        <div class="highlight-card" role="listitem">
          <div class="highlight-icon">üì¶</div>
          <div class="highlight-body">
            <h3>Largest Dataset</h3>
            <p>The largest dataset collected for the CARLA Leaderboard 2.0 challenge ‚Äî designed to cover diverse scenarios and long-tail events.</p>
          </div>
        </div>

        <div class="highlight-card" role="listitem">
          <div class="highlight-icon">üèÅ</div>
          <div class="highlight-body">
            <h3>Benchmark</h3>
            <p>Provides benchmarks for multiple autonomous-driving tasks: <strong>object detection</strong>, <strong>lane detection</strong>, <strong>traffic light detection</strong>, and <strong>planning</strong>.</p>
          </div>
        </div>

        <div class="highlight-card" role="listitem">
          <div class="highlight-icon">üìù</div>
          <div class="highlight-body">
            <h3>Text</h3>
            <p>Per-frame textual descriptions explaining the current situation of the ego vehicle (lane, speed, nearby hazards, etc.) to support behavior understanding and language-conditioned tasks.</p>
          </div>
        </div>

        <div class="highlight-card" role="listitem">
          <div class="highlight-icon">üìä</div>
          <div class="highlight-body">
            <h3>Score</h3>
            <p>A scene-level rarity score that measures how rare or unique a scene is in the dataset ‚Äî useful for curriculum learning and focused evaluation on rare events.</p>
          </div>
        </div>

        <div class="highlight-card" role="listitem">
          <div class="highlight-icon">üíæ</div>
          <div class="highlight-body">
            <h3>Parquet data format</h3>
            <p>Annotations and extracted features are provided in Parquet format for faster I/O and training throughput; integrates easily with modern data pipelines.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- EXPERIMENTS -->
  <section class="section" id="experiments">
    <div class="container">
      <h2 id="sec:experiments">Experiments</h2>

      <!-- ... (content preserved, for brevity I keep the same blocks as your original page) -->
      <!-- Keep your experiment content unchanged; truncated here to keep the file concise in the answer block -->
      <!-- In your real file keep the entire experiments content from your original index.html -->
      <!-- For completeness in your filesystem, paste your original experiments HTML here (unchanged) -->
      
      <!-- (Start of preserved experiments content: copy your previously supplied experiments block here) -->
      <article class="experiment-block" id="3d-object-detection">
        <h3>3D Object Detection</h3>
        <!-- original 3D object detection paragraphs and tables (keep as-is) -->
        <!-- ... -->
      </article>
      <article class="experiment-block" id="lane-detection">
        <h3>Lane Detection</h3>
        <!-- original lane detection content -->
      </article>
      <article class="experiment-block" id="traffic-light-detection">
        <h3>Traffic Light Detection</h3>
        <!-- original traffic light content -->
      </article>
      <article class="experiment-block" id="planning">
        <h3>Planning</h3>
        <!-- original planning content -->
      </article>
      <!-- (End of preserved experiments content) -->

    </div>
  </section>

  <!-- Visualization: images -->
  <section class="section" id="visualization">
    <div class="container">
      <h2>Visualization</h2>
      <p class="small-muted">Three data visualization images (in this order) from the <code>images/</code> folder.</p>

      <div class="viz-gallery" role="list">
        <div class="viz-item" role="listitem">
          <img src="images/select_episode.png" alt="Select Episode (images/select_episode.png)" data-full="images/select_episode.png" loading="lazy">
          <div class="viz-caption">Select Episode</div>
        </div>

        <div class="viz-item" role="listitem">
          <img src="images/bev.png" alt="BEV Visualization (images/bev.png)" data-full="images/bev.png" loading="lazy">
          <div class="viz-caption">BEV Visualization</div>
        </div>

        <div class="viz-item" role="listitem">
          <img src="images/front.png" alt="Front Camera View (images/front.png)" data-full="images/front.png" loading="lazy">
          <div class="viz-caption">Front Camera View</div>
        </div>
      </div>

      <!-- NEW: Video gallery (filenames fixed) -->
      <p class="small-muted" style="margin-top:18px">Two demonstration videos from the <code>videos/</code> folder.</p>
      <div class="video-gallery" role="list">
        <!-- Video 1 -->
        <div class="video-item" role="listitem">
          <video id="video_hazard" controls preload="metadata" playsinline poster="images/video1_poster.png" tabindex="0">
            <source src="videos/Town12_radar_HazardAtSideLaneTwoWays.mp4" type="video/mp4">
            Your browser does not support the video tag. You can <a href="videos/Town12_radar_HazardAtSideLaneTwoWays.mp4">download Town12_radar_HazardAtSideLaneTwoWays.mp4</a>.
          </video>
          <div class="video-caption">HazardAtSideLaneTwoWays</div>
          <div class="video-error" id="err_hazard" aria-live="polite"></div>
        </div>

        <!-- Video 2 -->
        <div class="video-item" role="listitem">
          <video id="video_static" controls preload="metadata" playsinline poster="images/video2_poster.png" tabindex="0">
            <source src="videos/Town12_radar_StaticCutIn.mp4" type="video/mp4">
            Your browser does not support the video tag. You can <a href="videos/Town12_radar_StaticCutIn.mp4">download Town12_radar_StaticCutIn.mp4</a>.
          </video>
          <div class="video-caption">StaticCutIn</div>
          <div class="video-error" id="err_static" aria-live="polite"></div>
        </div>
      </div>

    </div>
  </section>

  <!-- Citation -->
  <section class="section" id="citation">
    <div class="container">
      <h2>Citation</h2>
      <div class="citation-box">
        <pre id="citation-text">@inproceedings{2025tacarla,
  title   = {TaCarla: A comprehensive benchmarking dataset for end-to-end autonomous driving},
  author  = {TaCarla Research Team},
  year    = {2025}
}</pre>
        <div style="display:flex;flex-direction:column;gap:8px; margin-top:8px;">
          <button class="btn btn-primary" id="copyCitation">üìã Copy Citation</button>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer" style="padding:18px 0;background:#fff;border-top:1px solid #eee;">
    <div class="container" style="display:flex;gap:12px;justify-content:space-between;align-items:center;">
      <div>¬© 2025 TaCarla Team</div>
      <div>Contact: <a href="mailto:team@tacarla.example">team@tacarla.example</a></div>
    </div>
  </footer>

  <!-- Image modal -->
  <div id="imageModal" class="image-modal" role="dialog" aria-hidden="true">
    <div class="close-modal" id="closeModal" title="Close">&times;</div>
    <img id="modalImage" src="" alt="Full size" />
  </div>

  <!-- Inline script: image modal + copy citation + video debug -->
  <script>
    // image modal
    (function(){
      document.querySelectorAll('img[data-full]').forEach(img=>{
        img.style.cursor = 'zoom-in';
        img.addEventListener('click', ()=>{
          const modal = document.getElementById('imageModal');
          const modalImg = document.getElementById('modalImage');
          modalImg.src = img.dataset.full || img.src;
          modal.classList.add('active');
          modal.setAttribute('aria-hidden','false');
          document.body.style.overflow = 'hidden';
        });
      });
      const closeBtn = document.getElementById('closeModal');
      if (closeBtn) closeBtn.addEventListener('click', ()=>{
        const modal = document.getElementById('imageModal');
        modal.classList.remove('active');
        modal.setAttribute('aria-hidden','true');
        document.getElementById('modalImage').src = '';
        document.body.style.overflow = '';
      });
      document.addEventListener('keydown', (e)=>{ if (e.key==='Escape'){
        const modal=document.getElementById('imageModal'); if(modal && modal.classList.contains('active')){
          modal.classList.remove('active'); modal.setAttribute('aria-hidden','true'); document.getElementById('modalImage').src=''; document.body.style.overflow='';
        }
      }});
      // clicking outside image closes modal
      const imgModal = document.getElementById('imageModal');
      imgModal && imgModal.addEventListener('click', (e)=>{ if (e.target === imgModal){ imgModal.classList.remove('active'); imgModal.setAttribute('aria-hidden','true'); document.getElementById('modalImage').src=''; document.body.style.overflow=''; } });
    })();

    // copy citation
    (function(){
      const btn = document.getElementById('copyCitation');
      if (!btn) return;
      btn.addEventListener('click', async ()=>{
        const text = document.getElementById('citation-text').innerText;
        try {
          await navigator.clipboard.writeText(text);
          btn.textContent = '‚úÖ Copied!';
          setTimeout(()=> btn.textContent = 'üìã Copy Citation', 1500);
        } catch (err){
          alert('Could not copy automatically. Here is the citation:\n\n' + text);
        }
      });
    })();

    // Video debug & error UI helper
    (function(){
      function attachVideoDebug(id, errId) {
        const v = document.getElementById(id);
        const errBox = document.getElementById(errId);
        if (!v) return;

        v.addEventListener('loadedmetadata', ()=> {
          console.log(id + ' loadedmetadata readyState=', v.readyState, 'duration=', v.duration, 'videoWidth=', v.videoWidth, 'videoHeight=', v.videoHeight);
          if (errBox) { errBox.style.display = 'none'; errBox.textContent = ''; }
        });

        v.addEventListener('error', () => {
          const mediaErr = v.error;
          console.error(id + ' media error:', mediaErr);
          let msg = 'Video cannot be played.';
          if (mediaErr) {
            switch(mediaErr.code) {
              case mediaErr.MEDIA_ERR_ABORTED: msg = 'Playback aborted.'; break;
              case mediaErr.MEDIA_ERR_NETWORK: msg = 'Network error while fetching the video.'; break;
              case mediaErr.MEDIA_ERR_DECODE: msg = 'Decoding error (unsupported codec or corrupt file).'; break;
              case mediaErr.MEDIA_ERR_SRC_NOT_SUPPORTED: msg = 'Video format not supported or MIME type wrong.'; break;
              default: msg = 'Unknown media error.'; break;
            }
          }
          if (errBox) { errBox.style.display='block'; errBox.textContent = msg + ' See console (DevTools) for details.'; }
        });

        // helpful hint if browser prevents autoplay (no-op if not used)
        v.addEventListener('play', ()=> console.log(id + ' play event'));
      }

      attachVideoDebug('video_hazard','err_hazard');
      attachVideoDebug('video_static','err_static');
    })();
  </script>
</body>
</html>
